<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>COUNTDOWN âœ¨</title>

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:radial-gradient(circle at bottom,#0a1a3a,#000814);
  font-family:'Courier New',monospace;
}

/* ===== STARS ===== */
.star{
  position:absolute;
  width:2px;height:2px;
  background:#fff;
  border-radius:50%;
  opacity:.8;
  animation:twinkle 3s infinite;
}
@keyframes twinkle{
  0%,100%{opacity:.3}
  50%{opacity:1}
}

/* ===== SHOOTING STAR ===== */
.shooting-star{
  position:fixed;
  top:-10vh;
  left:-20vw;
  width:160px;
  height:2px;
  background:linear-gradient(90deg,rgba(255,255,255,1),rgba(255,255,255,0));
  transform:rotate(25deg);
  opacity:0.9;
  animation:shoot 1.2s ease-out forwards;
  filter:drop-shadow(0 0 10px white);
  z-index:2;
}
@keyframes shoot{
  from{transform:translate(0,0) rotate(25deg);opacity:1}
  to{transform:translate(140vw,120vh) rotate(25deg);opacity:0}
}

/* ===== TITLE WAVE RGB ===== */
#title{
  position:absolute;
  top:18%;
  width:100%;
  text-align:center;
  font-size:48px;
  letter-spacing:6px;
  z-index:10;
}
#title span{
  display:inline-block;
  animation:wave 2.5s ease-in-out infinite;
}
@keyframes wave{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-16px)}
}

/* ===== TIME â€“ WHITE NEON ===== */
#time{
  position:absolute;
  top:32%;
  left:50%;
  transform:translateX(-50%);
  font-size:84px;
  color:#fff;
  letter-spacing:4px;
  z-index:10;
  text-shadow:
    0 0 10px #fff,
    0 0 25px #fff,
    0 0 45px rgba(255,255,255,.6);
}

/* ===== YEAR â€“ RGB NEON ===== */
#year{
  position:absolute;
  top:45%;
  width:100%;
  text-align:center;
  font-size:64px;
  letter-spacing:12px;
  z-index:10;
  animation:rgbGlow 3s linear infinite;
}
@keyframes rgbGlow{
  0%{color:#ff4d4d;text-shadow:0 0 20px #ff4d4d}
  33%{color:#4dff88;text-shadow:0 0 20px #4dff88}
  66%{color:#4dd2ff;text-shadow:0 0 20px #4dd2ff}
  100%{color:#ff4dff;text-shadow:0 0 20px #ff4dff}
}

/* ===== FINAL COUNT ===== */
#count{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:190px;
  color:#fff;
  display:none;
  text-shadow:0 0 50px gold;
  animation:pulse 1s infinite;
  z-index:10;
}
@keyframes pulse{
  0%,100%{transform:translate(-50%,-50%) scale(1)}
  50%{transform:translate(-50%,-50%) scale(1.1)}
}

/* ===== CANVAS ===== */
canvas{position:absolute;inset:0}
</style>
</head>

<body>

<!-- ðŸŽµ MUSIC -->
<audio id="bgm" src="countdown.mp3" loop></audio>
<audio id="tick" src="tick.mp3" preload="auto"></audio>

<div id="title"></div>
<div id="time">00:00:00</div>
<div id="year">2025</div>
<div id="count">10</div>

<canvas id="cv"></canvas>

<script>
/* ===== TITLE ===== */
const titleText="COUNTDOWN";
const title=document.getElementById("title");
[...titleText].forEach((c,i)=>{
  const s=document.createElement("span");
  s.textContent=c;
  s.style.animationDelay=`${i*0.15}s`;
  title.appendChild(s);
});
setInterval(()=>{
  document.querySelectorAll("#title span").forEach(l=>{
    l.style.color=`hsl(${Math.random()*360},100%,70%)`;
  });
},200);

/* ===== STARS ===== */
for(let i=0;i<180;i++){
  const s=document.createElement("div");
  s.className="star";
  s.style.left=Math.random()*100+"vw";
  s.style.top=Math.random()*100+"vh";
  document.body.appendChild(s);
}

/* ===== SHOOTING STARS LOOP ===== */
setInterval(()=>{
  const star=document.createElement("div");
  star.className="shooting-star";
  star.style.top=Math.random()*30+"vh";
  document.body.appendChild(star);
  setTimeout(()=>star.remove(),1300);
},2500);

/* ===== AUDIO ===== */
document.addEventListener("click",()=>{
  bgm.volume=.6;
  bgm.play().catch(()=>{});
},{once:true});

/* ===== CANVAS FIREWORK ===== */
const canvas=document.getElementById("cv");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;
window.onresize=()=>{canvas.width=innerWidth;canvas.height=innerHeight};

let particles=[], rockets=[];

function circleBoom(x,y){
  for(let i=0;i<140;i++){
    const a=Math.random()*Math.PI*2;
    const s=Math.random()*6+3;
    particles.push({x,y,vx:Math.cos(a)*s,vy:Math.sin(a)*s,life:100,color:`hsl(${Math.random()*360},100%,60%)`});
  }
}
function heartBoom(x,y){
  for(let t=0;t<Math.PI*2;t+=0.08){
    const r=14*(1-Math.sin(t));
    particles.push({x,y,vx:r*Math.cos(t)*0.18,vy:-r*Math.sin(t)*0.18,life:110,color:"#ff5fa2"});
  }
}
function launchRocket(){
  rockets.push({
    x:Math.random()*canvas.width,
    y:canvas.height,
    vy:-(Math.random()*6+8),
    type:Math.random()<0.4?"heart":"circle"
  });
}
function draw(){
  ctx.fillStyle="rgba(0,0,20,.25)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  rockets.forEach((r,i)=>{
    r.y+=r.vy;
    ctx.fillStyle="#fff";
    ctx.fillRect(r.x,r.y,2,12);
    if(r.y<canvas.height*0.4){
      r.type==="heart"?heartBoom(r.x,r.y):circleBoom(r.x,r.y);
      rockets.splice(i,1);
    }
  });

  particles.forEach((p,i)=>{
    p.x+=p.vx;p.y+=p.vy;p.vy+=0.05;p.life--;
    ctx.globalAlpha=p.life/110;
    ctx.fillStyle=p.color;
    ctx.beginPath();
    ctx.arc(p.x,p.y,2.4,0,Math.PI*2);
    ctx.fill();
    if(p.life<=0)particles.splice(i,1);
  });

  ctx.globalAlpha=1;
  requestAnimationFrame(draw);
}
draw();
setInterval(launchRocket,700);

/* ===== TIME ===== */
function format(sec){
  const h=Math.floor(sec/3600);
  const m=Math.floor((sec%3600)/60);
  const s=sec%60;
  return `${String(h).padStart(2,"0")}:${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`;
}
function secondsToNewYear(){
  const now=new Date();
  const target=new Date(now.getFullYear()+1,0,1,0,0,0);
  return Math.max(0,Math.floor((target-now)/1000));
}

/* ===== MAIN ===== */
const tickSound=document.getElementById("tick");
function tick(){
  const s=secondsToNewYear();

  if(s<=10){
    time.style.display="none";
    year.style.display="none";
    count.style.display="block";
    count.textContent=s;

    launchRocket();launchRocket();

    if(s>0){
      tickSound.currentTime=0;
      tickSound.volume=.9;
      tickSound.play().catch(()=>{});
    }

    if(s===0){
      count.textContent="ðŸŽ†";
      year.textContent="2026";
      year.style.display="block";
      for(let i=0;i<14;i++){
        setTimeout(launchRocket,i*180);
      }
    }
  }else{
    time.style.display="block";
    year.style.display="block";
    count.style.display="none";
    time.textContent=format(s);
  }
}
setInterval(tick,1000);
tick();
</script>

</body>
</html>
